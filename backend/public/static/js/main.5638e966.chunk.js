(this.webpackJsonpcodedamn=this.webpackJsonpcodedamn||[]).push([[0],{445:function(e,t,n){},448:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(19),s=n.n(a),r=n(17),l=n.n(r),i=n(10),o=n(16),d=n(32),j=n(5),u=n(26),b=n(6),O=n(33),h=n.n(O),f=n(450),x=n(451),p=n(456),m=n(458),g=n(452),v=n(453),y=n(454),C=n(455),k=n(2),w=function(e){var t=e.name,n=e.deleteFile,a=e.renameFile,s=e.current,r=e.changeCurrent,l=e.opened,o=e.setOpened,d=Object(c.useState)(!1),j=Object(b.a)(d,2),u=j[0],O=j[1],h=Object(c.useState)(t),p=Object(b.a)(h,2),w=p[0],F=p[1],N=Object(c.useRef)(null),S=function(){return O(!u)};return Object(k.jsxs)("div",{className:"tile",ref:N,style:{display:"flex",padding:"5px 3%",cursor:"pointer",backgroundColor:s.name===t?"#100C08":"transparent"},onMouseOver:function(){return s.name!==t?N.current.style.backgroundColor="#100C08":null},onMouseOut:function(){return s.name!==t?N.current.style.backgroundColor="transparent":null},children:[Object(k.jsxs)("div",{style:{display:"flex",flexGrow:4},onClick:function(){r(t),l.includes(t)||o([].concat(Object(i.a)(l),[t]))},children:[Object(k.jsx)("div",{style:{flexGrow:1},children:Object(k.jsx)(f.a,{size:18})}),Object(k.jsx)("div",{style:{flexGrow:4},onDoubleClick:function(){return O(!0)},children:t})]}),Object(k.jsx)("div",{className:"trash",style:{flexGrow:1,display:"flex",justifyContent:"flex-end",cursor:"pointer"},children:Object(k.jsx)(x.a,{size:18,onClick:function(){return n(t)}})}),Object(k.jsxs)(m.a,{isOpen:u,toggle:S,centered:!0,className:"insert",children:[Object(k.jsxs)(g.a,{children:[Object(k.jsxs)("div",{style:{marginBottom:"5px"},children:["Enter new name for ",t]}),Object(k.jsx)(v.a,{placeholder:"app.js",value:w,onChange:function(e){return F(e.target.value)}})]}),Object(k.jsxs)(y.a,{children:[Object(k.jsx)(C.a,{color:"primary",onClick:function(){S(),a(t,w)},children:"Rename"}),Object(k.jsx)(C.a,{color:"secondary",onClick:S,children:"Cancel"})]})]})]})};function F(){var e=Object(c.useContext)(_),t=e.files,n=e.addFile,a=e.deleteFile,s=e.renameFile,r=e.current,l=e.changeCurrent,i=e.opened,o=e.setOpened,d=Object(c.useState)(!1),j=Object(b.a)(d,2),u=j[0],O=j[1],h=Object(c.useState)(""),f=Object(b.a)(h,2),x=f[0],F=f[1],N=function(){return O(!u)};return Object(k.jsxs)("div",{style:{color:"white"},children:[Object(k.jsxs)("div",{className:"FilesHeading",style:{display:"flex",justifyContent:"space-between",backgroundColor:"#1a2228",padding:"5% 3%"},children:[Object(k.jsx)("div",{style:{fontFamily:"monospace",fontWeight:"bold",fontSize:"18px"},children:"Files"}),Object(k.jsx)("div",{onClick:function(){return O(!0)},children:Object(k.jsx)(p.a,{color:"white",size:18,style:{cursor:"pointer"}})})]}),Object(k.jsx)("div",{className:"FilesBody",style:{padding:"5% 0"},children:Object.values(t).map((function(e){return Object(k.jsx)(w,{name:e.name,deleteFile:a,renameFile:s,current:r,changeCurrent:l,opened:i,setOpened:o},e.name)}))}),Object(k.jsxs)(m.a,{isOpen:u,toggle:N,centered:!0,className:"insert",children:[Object(k.jsxs)(g.a,{children:[Object(k.jsx)("div",{style:{marginBottom:"5px"},children:"Enter name of file to add"}),Object(k.jsx)(v.a,{placeholder:"app.js",onChange:function(e){return F(e.target.value)}})]}),Object(k.jsxs)(y.a,{children:[Object(k.jsx)(C.a,{color:"primary",onClick:function(){N(),n(x)},children:"Add"}),Object(k.jsx)(C.a,{color:"secondary",onClick:N,children:"Cancel"})]})]})]})}var N,S=n(457),R=n(76),z=function(e){var t=e.name,n=e.current,a=e.changeCurrent,s=e.closeFile,r=Object(c.useRef)(null);return Object(k.jsxs)("div",{className:"tile",ref:r,style:{display:"flex",cursor:"default",alignItems:"center",padding:"10px",backgroundColor:n.name===t?"#100C08":"transparent"},onMouseOver:function(){return n.name!==t?r.current.style.backgroundColor="#100C08":null},onMouseOut:function(){return n.name!==t?r.current.style.backgroundColor="transparent":null},children:[Object(k.jsxs)("div",{style:{display:"flex"},onClick:function(){a(t)},children:[Object(k.jsx)("div",{style:{marginRight:"5px"},children:Object(k.jsx)(f.a,{size:18})}),Object(k.jsx)("div",{style:{marginRight:"15px"},children:t})]}),Object(k.jsx)("div",{className:"close",style:{display:"flex",justifyContent:"flex-end",cursor:"pointer"},onClick:function(){s(t)},children:Object(k.jsx)(S.a,{size:16})})]})};function B(){var e=Object(c.useContext)(_),t=e.files,n=e.setFiles,a=e.current,s=e.changeCurrent,r=e.opened,l=e.closeFile;return Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(k.jsx)("div",{className:"monaco-heading",style:{display:"flex",backgroundColor:"#282C35",color:"white"},children:r.map((function(e){return Object(k.jsx)(z,{name:e,style:{margin:"10px"},current:a,changeCurrent:s,closeFile:l},e)}))}),Object(k.jsx)("div",{className:"monaco-body",style:{height:"100%",width:"100%",display:"flex",flexGrow:1},children:Object(k.jsx)(R.a,{theme:"vs-dark",defaultLanguage:a.language,defaultValue:a.value,path:a.name,onChange:function(e){n(Object(j.a)(Object(j.a)({},t),{},Object(o.a)({},a.name,Object(j.a)(Object(j.a)({},t[a.name]),{},{value:h()(N||(N=Object(d.a)(["",""])),e)}))))},loading:"Loading...",style:{height:"100%",width:"100%",flexGrow:1}})})]})}var D=n(70),G=n.n(D),T=n(72),E=n.n(T),M=n(73),I=n.n(M)()();function J(){return Object(k.jsx)("div",{style:{overflow:"scroll",backgroundColor:"black"},children:Object(k.jsx)(G.a,{style:{width:"100%"},hideTopBar:!0,allowTabs:!1,plugins:[I,{class:E.a,config:{filesystem:I.displayName}}]})})}var L,A="",P=n(27),_=(n(444),Object(c.createContext)());var H=function(){var e=Object(c.useState)({}),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(n[Object.keys(n)[0]]||{}),r=Object(b.a)(s,2),O=r[0],f=r[1],x=Object(c.useState)([]),p=Object(b.a)(x,2),m=p[0],g=p[1],v=Object(c.useState)(""),y=Object(b.a)(v,2),C=y[0],w=y[1],N=Object(c.useState)(!0),S=Object(b.a)(N,2),R=S[0],z=S[1],D=Object(c.useState)(Date.now()),G=Object(b.a)(D,2),T=G[0],E=G[1],M={html:"html",htm:"html",css:"css",js:"javascript"};Object(c.useEffect)((function(){var e=localStorage.getItem("sandbox_token");e?(w(e),function(e){V.apply(this,arguments)}(e),z(!1)):function(){H.apply(this,arguments)}()}),[]),Object(c.useEffect)((function(){if(C){var e=setTimeout((function(){fetch("".concat(A,"/files?token=").concat(C),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:n})}).then((function(e){return e.json()})).then((function(e){(null===e||void 0===e?void 0:e.status)&&E(Date.now())}))}),1e3);return function(){return clearTimeout(e)}}}),[n]);var I=Object(c.useMemo)((function(){return{files:n,setFiles:a,current:O,setCurrent:f,opened:m,setOpened:g}}),[n,O,m]);function H(){return(H=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/register-new-user"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,localStorage.setItem("sandbox_token",n.token),a(n.files),w(n.token),z(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/files?token=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,a(c?c.files:{}),z(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){f(null!==e?n[e]:{})}function q(e){var t=Object(i.a)(m),n=t.indexOf(e);n>-1&&(t.splice(n,1),e===O.name&&(t.length>0?W(t[0]):W(null)),g(t))}return R?Object(k.jsx)("div",{children:"Loading...."}):Object(k.jsx)(_.Provider,{value:Object(j.a)(Object(j.a)({},I),{},{addFile:function(e){n[e]||a(Object(j.a)(Object(j.a)({},n),{},Object(o.a)({},e,{name:e,language:M[e.split(".")[1]],value:h()(L||(L=Object(d.a)([""])))})))},deleteFile:function(e){var t=Object(j.a)({},n);delete t[e],q(e),a(t)},renameFile:function(e,t){var c=Object(j.a)({},n);c[t]=Object(j.a)(Object(j.a)({},n[e]),{},{name:t}),delete c[e],a(c)},changeCurrent:W,closeFile:q}),children:Object(k.jsxs)("div",{className:"App",style:{display:"flex",height:"100vh",width:"100vw"},children:[Object(k.jsx)("div",{className:"files",style:{width:"12vw",backgroundColor:"#282C35",borderRight:"1px solid rgba(0, 0, 0, .08)"},children:Object(k.jsx)(F,{})}),Object(k.jsxs)(P.a,{orientation:"vertical",children:[Object(k.jsx)(P.b,{className:"left-pane",children:Object(k.jsxs)("div",{className:"editor",style:{borderRight:"1px solid rgba(0, 0, 0, .08)",display:"flex",flexDirection:"column"},children:[Object(k.jsx)("div",{className:"monaco-editor",style:{height:"80vh",borderBottom:"1px solid rgba(0, 0, 0, .08)"},children:Object.keys(n).length>0&&O&&O.name&&m.length>0?Object(k.jsx)(B,{}):Object(k.jsx)("div",{style:{backgroundColor:"#282C35",height:"100%",width:"100%"}})}),Object(k.jsx)("div",{className:"terminal",style:{height:"20vh",display:"flex",flexDirection:"column"},children:Object(k.jsx)(J,{})})]})}),Object(k.jsx)(P.c,{}),Object(k.jsx)(P.b,{className:"right-pane",children:n["index.html"]?Object(k.jsx)("div",{className:"preview",style:{height:"100%",overflow:"hidden"},children:Object(k.jsx)("iframe",{src:"".concat(A,"/repls/").concat(C),height:"100%",width:"100%"},T)}):null})]})]})})};n(445),n(446);s.a.render(Object(k.jsx)(H,{}),document.getElementById("root"))}},[[448,1,2]]]);
//# sourceMappingURL=main.5638e966.chunk.js.map